---
title: Ambient Code Platform - System Overview
---

%%{init: {'theme':'neutral', 'themeVariables': { 'primaryColor': '#f5f5f5', 'primaryTextColor': '#000000', 'primaryBorderColor': '#333333', 'lineColor': '#666666', 'secondaryColor': '#ffffff', 'tertiaryColor': '#f0f0f0', 'fontSize': '14px', 'fontFamily': 'sans-serif'}}}%%

graph TB
    subgraph "User Layer"
        User["ðŸ‘¤ User<br/>Web Browser"]
    end

    subgraph "Frontend Layer"
        Frontend["Frontend<br/>NextJS + Shadcn<br/>- Session management<br/>- Real-time updates<br/>- WebSocket support"]
    end

    subgraph "API Layer"
        Backend["Backend API<br/>Go + Gin<br/>- REST endpoints<br/>- Token validation<br/>- RBAC checks<br/>- Git operations"]
    end

    subgraph "Kubernetes Control Plane"
        K8sAPI["Kubernetes API<br/>- Custom Resources<br/>- Jobs<br/>- RBAC"]
        Operator["Agentic Operator<br/>Go Controller<br/>- Watches CRs<br/>- Creates/manages Jobs<br/>- Monitors execution<br/>- Handles cleanup"]
    end

    subgraph "Execution Layer"
        Job["Kubernetes Job<br/>- Manages pod lifecycle<br/>- Resource limits<br/>- Retry policy"]
        Runner["Claude Code Runner<br/>Python Pod<br/>- Claude Code CLI<br/>- MCP Servers<br/>- Code execution<br/>- AI reasoning"]
    end

    subgraph "Storage & Configuration"
        ProjectSettings["ProjectSettings CR<br/>- API keys<br/>- Model config<br/>- Timeout settings"]
        Results["Results Storage<br/>- Artifacts<br/>- Logs<br/>- Execution output"]
    end

    User -->|interacts with| Frontend
    Frontend -->|REST + WebSocket| Backend
    Backend -->|CRUD| K8sAPI
    Backend -->|config lookup| ProjectSettings

    Operator -->|watches| K8sAPI
    Operator -->|creates/monitors| Job
    Job -->|spawns| Runner

    Runner -->|streams output| Results
    Results -->|status updates| K8sAPI
    K8sAPI -->|notifies| Backend
    Backend -->|pushes updates| Frontend
    Frontend -->|displays| User

    classDef user fill:#e8e8e8,stroke:#333333,stroke-width:2px,color:#000000
    classDef component fill:#f5f5f5,stroke:#333333,stroke-width:2px,color:#000000
    classDef kubernetes fill:#ffffff,stroke:#333333,stroke-width:2px,color:#000000
    classDef execution fill:#f0f0f0,stroke:#333333,stroke-width:2px,color:#000000
    classDef storage fill:#f9f9f9,stroke:#333333,stroke-width:2px,color:#000000

    class User user
    class Frontend,Backend component
    class K8sAPI,Operator kubernetes
    class Job,Runner execution
    class ProjectSettings,Results storage
